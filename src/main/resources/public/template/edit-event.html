<div class="row">
	<h2>
        <i18n ng-if="!calendarEvent._id">calendar.new.event</i18n>
		<i18n ng-if="calendarEvent._id">calendar.edit.event</i18n>
    </h2>
    


    <div class="row">
        <label><i18n>calendar.event.calendar</i18n></label><span ng-if="calendarEvent._id"> [[calendarEvent.calendar.title]]</span>
        <select ng-if="!calendarEvent._id" class="twelve cell" ng-model="calendarEvent.calendar" ng-change="changeCalendarEventCalendar()" 
        ng-options="opt as opt.title for opt in calendars.selection() | filter:hasContribRight" />
    </div>

    <div class="row" ng-if="calendarEvent._id">
        <div class="twelve cell form-element">
            <label><i18n>calendar.event.owner</i18n></label><span> [[calendarEvent.owner.displayName]]</span>
        </div>
    </div>

	<label class="twelve cell"><i18n>calendar.event.title</i18n></label>
	<input class="twelve cell" required ng-model="calendarEvent.title" type="text"/>

    <label class="twelve cell"><i18n>calendar.event.description</i18n></label>
    <textarea class="twelve cell" ng-model="calendarEvent.description" />

    <label class="twelve cell"><i18n>calendar.event.location</i18n></label>
    <input class="twelve cell" ng-model="calendarEvent.location" type="text"/>

	<div class="row">
		<div class="six cell">
			<label class="twelve cell form-label"><i18n>calendar.event.start.date</i18n></label>
			<date-picker-calendar ng-model="calendarEvent.startMoment"></date-picker-calendar>
		</div>
		<div class="six cell" ng-if="!calendarEvent.allday">    
			<label class="twelve cell form-label"><i18n>calendar.event.start.time</i18n></label>
			<time-picker-calendar id="time-picker-start-moment" class="input-small two cell time-picker" ng-begin="true" ng-limit="calendarEvent.endMoment" ng-model="calendarEvent.startMoment" required></time-picker-calendar>
		</div>
	</div>

	<div class="row">
		<div class="six cell">
			<label class="twelve cell form-label"><i18n>calendar.event.end.date</i18n></label>
			<date-picker-calendar ng-model="calendarEvent.endMoment"></date-picker-calendar>
		</div>
		<div class="six cell" ng-if="!calendarEvent.allday">
			<label class="twelve cell form-label"><i18n>calendar.event.end.time</i18n></label>
			<time-picker-calendar id="time-picker-end-moment" class="input-small two cell" ng-end="true" ng-limit="calendarEvent.startMoment" ng-model="calendarEvent.endMoment" 
				required></time-picker-calendar>
		</div>
	</div>

    <div class="twelve cell">
        <input type="checkbox" ng-model="calendarEvent.allday"/>
        <label><i18n>calendar.event.allday</i18n></label>
        <input type="checkbox" ng-model="display.calendarEventRecurrence"/>
        <label><i18n>calendar.event.recurrence</i18n></label>
    </div>

	<span ng-if="calendarEvent._id">
    	<button class="right-magnet" ng-click="confirmRemoveCalendarEvent(calendarEvent, $event)"><i18n>remove</i18n></button>
	</span>
	<button class="right-magnet" ng-click="saveCalendarEventEdit()"><i18n>save</i18n></button>
</div>



<div ng-if="display.calendarEventRecurrence">
    <lightbox show="display.calendarEventRecurrence" on-close="cancelCalendarEventRecurrence()">
        <div class="row">
            <i18n>calendar.recurrence</i18n>
        </div>

        <div class="row">
            <label><i18n>calendar.reccurent</i18n></label>
            <select ng-model="calendarEvent.reccurence.type">
                <option><i18n>calendar.recurrence.every.day</i18n></option>
                <option><i18n>calendar.recurrence.every.week.day</i18n></option>
                <option><i18n>calendar.recurrence.every.week</i18n></option>
                <option><i18n>calendar.recurrence.every.month</i18n></option>
                <option><i18n>calendar.recurrence.every.year</i18n></option>
            </select>
        </div>

        <div class="row">
            <label><i18n>calendar.recurrence.repeat.on</i18n></label>
            <select ng-model="calendarEvent.recurrence.repeat">
                <option ng-repeat="i in periods.periodicities">[[i]]</option>
            </select>
        </div>

        <div class="row">
            <label><i18n>calendar.recurrence.end</i18n></label>
            <div class="row">
                <input type="radio" name="reccurence-end" ng-model="calendarEvent.recurrence.end" value="never"/>
                <label><i18n>calendar.recurrence.end.never</i18n></label>
            </div>
            <div class="row">
                <input type="radio" name="reccurence-end" ng-model="calendarEvent.recurrence.end" value="after"/>
                <label><i18n>calendar.recurrence.end.after</i18n></label>
            </div>
            <div class="row">
                <input type="radio" name="reccurence-end" ng-model="calendarEvent.recurrence.end" value="on"/>
                <label><i18n>calendar.recurrence.end.on</i18n></label>
            </div>
        </div>

        <div class="row"> 
            <input type="button" class="cancel right-magnet" i18n-value="cancel" ng-click="cancelRemoveCalendarEvent()" />
            <button class="right-magnet" ng-click="removeCalendarEvent(calendarEvent, $event)"><i18n>remove</i18n></button>
        </div>
    </lightbox>
</div>


